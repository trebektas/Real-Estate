import{g as H,e as P,r as B,o as V,c as C,d as e,f as i,w as b,a as t,n as F}from"./index-372ed09a.js";import{c as O,a as d,b as a,d as T,e as k,F as r,E as n,f as I}from"./index.esm-4a437bd1.js";import{_ as U}from"./BackToOverview-1c3dda70.js";const j={class:"container-new-listing-main"},J={class:"wrapper-new-listing"},K={class:"header-new-listing"},X=e("h1",null,"Edit listing",-1),L={class:"container-form"},Z={class:"container-input"},Q=e("label",{for:"streetName"},"Street Name*",-1),W={class:"container-input container-double-input"},ee={class:"double-input"},ie=e("label",{for:"houseNumber"},"House Number*",-1),te={class:"double-input"},se=e("label",{for:"numberAddition"},"Addition (optional)",-1),oe={class:"container-input"},re=e("label",{for:"zip"},"Postal Code*",-1),ne={class:"container-input"},ae=e("label",{for:"city"},"City*",-1),de={class:"container-input"},ce=e("label",{for:"image"},"Upload picture (PNG or JPG)*",-1),ue={class:"container-input"},le=e("label",{for:"price"},"Price*",-1),me={class:"container-input container-double-input"},pe={class:"double-input"},he=e("label",{for:"size"},"Size*",-1),be={class:"double-input"},_e=e("label",{for:"hasGarage"},"Garage*",-1),ge=e("option",{value:"",selected:"",disabled:"",hidden:"",class:"default-select-option"}," Select ",-1),fe=e("option",{value:"true"},"Yes",-1),ve=e("option",{value:"false"},"No",-1),ye={class:"container-input container-double-input"},qe={class:"double-input"},Ne=e("label",{for:"bedrooms"},"Bedrooms*",-1),ze={class:"double-input"},we=e("label",{for:"bathrooms"},"Bathrooms*",-1),Ee={class:"container-input"},Re=e("label",{for:"constructionYear"},"Construction date*",-1),Ae={class:"container-input"},Me=e("label",{for:"description"},"Description*",-1),xe={class:"container-button"},De={__name:"HouseEditView",setup(Ge){const c=H(),_=P(),h=B({}),u=new Headers;u.append("X-Api-Key","xD7bh1ZoA3mRlwrv8dYaNgXGLuKe_4JP");const g={method:"GET",headers:u,redirect:"follow"};fetch(`https://api.intern.d-tt.nl/api/houses/${c.params.id}`,g).then(s=>s.json()).then(s=>{h.value={streetName:s[0].location.street,houseNumber:s[0].location.houseNumber,numberAddition:s[0].location.houseNumberAddition==="undefined"?"":s[0].location.houseNumberAddition,zip:s[0].location.zip,city:s[0].location.city,image:s[0].image,price:s[0].price,size:s[0].size,hasGarage:s[0].hasGarage,bedrooms:s[0].rooms.bedrooms,bathrooms:s[0].rooms.bathrooms,constructionYear:s[0].constructionYear,description:s[0].description}}).catch(s=>console.log("error",s));const f=O({streetName:d().required("Required field missing.").trim(),houseNumber:a().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),numberAddition:d().trim(),zip:d().required("Required field missing.").trim(),city:d().required("Required field missing.").trim(),image:T().required("Required field missing.").test("is-valid-size","Max allowed size is 7MB",s=>s&&s.size<="7340032"),price:a().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),size:a().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),hasGarage:k().required("Required field missing."),bedrooms:a().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),bathrooms:a().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),constructionYear:a().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number").test("len","Must be exactly 4 characters",s=>s.toString().length===4).min(1901,"Must be greater than or equal to 1901").max(2023,"Must be less than or equal to 2023"),description:d().required("Required field missing.")});function v(s){const o=new FormData,{price:l,bedrooms:q,bathrooms:N,size:z,streetName:w,houseNumber:E,numberAddition:R,zip:A,city:M,constructionYear:x,hasGarage:G,description:S,image:$}=s;o.append("price",l),o.append("bedrooms",q),o.append("bathrooms",N),o.append("size",z),o.append("streetName",w),o.append("houseNumber",E),o.append("numberAddition",R),o.append("zip",A),o.append("city",M),o.append("constructionYear",x),o.append("hasGarage",G),o.append("description",S);const Y={method:"POST",headers:u,body:o,redirect:"follow"};fetch(`https://api.intern.d-tt.nl/api/houses/${c.params.id}`,Y).then(()=>{const m=new FormData;m.append("image",$);const D={method:"POST",headers:u,body:m,redirect:"follow"};fetch(`https://api.intern.d-tt.nl/api/houses/${c.params.id}/upload`,D).then(p=>{p.ok&&setTimeout(()=>{_.push({name:"houseDetails",params:{id:c.params.id}})},1e3)}).catch(p=>console.log("Error occurred:",p))}).catch(m=>console.log("Error occurred:",m))}function y(){console.log("Invalid Submit")}return(s,o)=>(V(),C("div",j,[e("div",J,[e("div",K,[i(U),X]),e("div",L,[i(t(I),{onSubmit:v,onInvalidSubmit:y,"validation-schema":t(f),"initial-values":h.value},{default:b(({meta:l})=>[e("div",Z,[Q,i(t(r),{id:"streetName",type:"text",name:"streetName",placeholder:"Enter the street name"}),i(t(n),{name:"streetName",class:"error-message"})]),e("div",W,[e("div",ee,[ie,i(t(r),{id:"houseNumber",type:"number",name:"houseNumber",placeholder:"Enter house number"}),i(t(n),{name:"houseNumber"})]),e("div",te,[se,i(t(r),{id:"numberAddition",type:"text",name:"numberAddition",placeholder:"e.g. A"}),i(t(n),{name:"numberAddition"})])]),e("div",oe,[re,i(t(r),{id:"zip",type:"text",name:"zip",placeholder:"e.g. 1000 AA"}),i(t(n),{name:"zip"})]),e("div",ne,[ae,i(t(r),{id:"city",type:"text",name:"city",placeholder:"e.g. Utrecht"}),i(t(n),{name:"city"})]),e("div",de,[ce,i(t(r),{id:"image",type:"file",name:"image",accept:".png,.jpg"}),i(t(n),{name:"image",class:"upload-error-message"})]),e("div",ue,[le,i(t(r),{id:"price",type:"number",name:"price",placeholder:"e.g. â‚¬150.000"}),i(t(n),{name:"price"})]),e("div",me,[e("div",pe,[he,i(t(r),{id:"size",type:"number",name:"size",placeholder:"e.g. 60m2"}),i(t(n),{name:"size"})]),e("div",be,[_e,i(t(r),{id:"hasGarage",as:"select",name:"hasGarage",placeholder:"e.g. A",class:"select-input",required:""},{default:b(()=>[ge,fe,ve]),_:1}),i(t(n),{name:"hasGarage"})])]),e("div",ye,[e("div",qe,[Ne,i(t(r),{id:"bedrooms",type:"number",name:"bedrooms",placeholder:"Enter amount"}),i(t(n),{name:"bedrooms"})]),e("div",ze,[we,i(t(r),{id:"bathrooms",type:"text",name:"bathrooms",placeholder:"Enter amount"}),i(t(n),{name:"bathrooms"})])]),e("div",Ee,[Re,i(t(r),{id:"constructionYear",type:"number",name:"constructionYear",placeholder:"e.g. 1990"}),i(t(n),{name:"constructionYear"})]),e("div",Ae,[Me,i(t(r),{id:"description",as:"textarea",name:"description",placeholder:"Enter description",class:"input-description"}),i(t(n),{name:"description"})]),e("div",xe,[e("button",{type:"submit",class:F(["save-button",!l.dirty||!l.valid?"save-button-disabled":""])}," SAVE ",2)])]),_:1},8,["validation-schema","initial-values"])])])]))}};export{De as default};
