import{_ as C}from"./BackToOverview-1c3dda70.js";import{c as Y,a as c,b as d,d as P,e as $,F as o,E as n,f as D}from"./index.esm-4a437bd1.js";import{e as B,o as F,c as O,d as e,f as t,w as b,a as i,n as T}from"./index-372ed09a.js";const k={class:"container-new-listing-main"},H={class:"wrapper-new-listing"},I={class:"header-new-listing"},L=e("h1",null,"Create new listing",-1),U={class:"container-form"},j={class:"container-input"},J=e("label",{for:"streetName"},"Street Name*",-1),K={class:"container-input container-double-input"},V={class:"double-input"},X=e("label",{for:"houseNumber"},"House Number*",-1),Z={class:"double-input"},Q=e("label",{for:"numberAddition"},"Addition (optional)",-1),W={class:"container-input"},ee=e("label",{for:"zip"},"Postal Code*",-1),te={class:"container-input"},ie=e("label",{for:"city"},"City*",-1),se={class:"container-input"},oe=e("label",{for:"image"},"Upload picture (PNG or JPG)*",-1),ne={class:"container-input"},re=e("label",{for:"price"},"Price*",-1),ae={class:"container-input container-double-input"},de={class:"double-input"},ce=e("label",{for:"size"},"Size*",-1),ue={class:"double-input"},le=e("label",{for:"hasGarage"},"Garage*",-1),me=e("option",{value:"",selected:"",disabled:"",hidden:"",class:"default-select-option"}," Select ",-1),pe=e("option",{value:"true"},"Yes",-1),be=e("option",{value:"false"},"No",-1),he={class:"container-input container-double-input"},_e={class:"double-input"},ge=e("label",{for:"bedrooms"},"Bedrooms*",-1),fe={class:"double-input"},ve=e("label",{for:"bathrooms"},"Bathrooms*",-1),qe={class:"container-input"},ye=e("label",{for:"constructionYear"},"Construction date*",-1),Ne={class:"container-input"},we=e("label",{for:"description"},"Description*",-1),Re={class:"container-button"},Se={__name:"CreateNewListing",setup(ze){const h=B(),u=new Headers;u.append("X-Api-Key","xD7bh1ZoA3mRlwrv8dYaNgXGLuKe_4JP");const _=Y({streetName:c().required("Required field missing.").trim(),houseNumber:d().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),numberAddition:c().trim(),zip:c().required("Required field missing.").trim(),city:c().required("Required field missing.").trim(),image:P().required("Required field missing.").test("is-valid-size","Max allowed size is 7MB",r=>r&&r.size<="7340032"),price:d().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),size:d().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),hasGarage:$().required("Required field missing."),bedrooms:d().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),bathrooms:d().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number"),constructionYear:d().required("Required field missing.").typeError("Required field must be a number.").integer("Must be a whole number (no decimals)").positive("Must be a positive number").test("len","Must be exactly 4 characters",r=>r.toString().length===4).min(1901,"Must be greater than or equal to 1901").max(2023,"Must be less than or equal to 2023"),description:c().required("Required field missing.")});function g(r){const s=new FormData,{price:l,bedrooms:v,bathrooms:q,size:y,streetName:N,houseNumber:w,numberAddition:R,zip:z,city:M,constructionYear:E,hasGarage:x,description:A,image:S}=r;s.append("price",l),s.append("bedrooms",v),s.append("bathrooms",q),s.append("size",y),s.append("streetName",N),s.append("houseNumber",w),s.append("numberAddition",R),s.append("zip",z),s.append("city",M),s.append("constructionYear",E),s.append("hasGarage",x),s.append("description",A),fetch("https://api.intern.d-tt.nl/api/houses",{method:"POST",headers:u,body:s,redirect:"follow"}).then(a=>a.json()).then(a=>{if(a){const p=new FormData;p.append("image",S);const G={method:"POST",headers:u,body:p,redirect:"follow"};fetch(`https://api.intern.d-tt.nl/api/houses/${a.id}/upload`,G).then(m=>{m.ok&&setTimeout(()=>{h.push({name:"houseDetails",params:{id:a.id}})},1e3)}).catch(m=>console.log("Error occurred:",m))}}).catch(a=>console.log("Error occurred:",a))}function f(){console.log("Invalid Submit")}return(r,s)=>(F(),O("div",k,[e("div",H,[e("div",I,[t(C),L]),e("div",U,[t(i(D),{onSubmit:g,onInvalidSubmit:f,"validation-schema":i(_)},{default:b(({meta:l})=>[e("div",j,[J,t(i(o),{id:"streetName",type:"text",name:"streetName",placeholder:"Enter the street name"}),t(i(n),{name:"streetName",class:"error-message"})]),e("div",K,[e("div",V,[X,t(i(o),{id:"houseNumber",type:"number",name:"houseNumber",placeholder:"Enter house number"}),t(i(n),{name:"houseNumber"})]),e("div",Z,[Q,t(i(o),{id:"numberAddition",type:"text",name:"numberAddition",placeholder:"e.g. A"}),t(i(n),{name:"numberAddition"})])]),e("div",W,[ee,t(i(o),{id:"zip",type:"text",name:"zip",placeholder:"e.g. 1000 AA"}),t(i(n),{name:"zip"})]),e("div",te,[ie,t(i(o),{id:"city",type:"text",name:"city",placeholder:"e.g. Utrecht"}),t(i(n),{name:"city"})]),e("div",se,[oe,t(i(o),{id:"image",type:"file",name:"image",accept:".png,.jpg"}),t(i(n),{name:"image",class:"upload-error-message"})]),e("div",ne,[re,t(i(o),{id:"price",type:"number",name:"price",placeholder:"e.g. â‚¬150.000"}),t(i(n),{name:"price"})]),e("div",ae,[e("div",de,[ce,t(i(o),{id:"size",type:"number",name:"size",placeholder:"e.g. 60m2"}),t(i(n),{name:"size"})]),e("div",ue,[le,t(i(o),{id:"hasGarage",as:"select",name:"hasGarage",placeholder:"e.g. A",class:"select-input",required:""},{default:b(()=>[me,pe,be]),_:1}),t(i(n),{name:"hasGarage"})])]),e("div",he,[e("div",_e,[ge,t(i(o),{id:"bedrooms",type:"number",name:"bedrooms",placeholder:"Enter amount"}),t(i(n),{name:"bedrooms"})]),e("div",fe,[ve,t(i(o),{id:"bathrooms",type:"text",name:"bathrooms",placeholder:"Enter amount"}),t(i(n),{name:"bathrooms"})])]),e("div",qe,[ye,t(i(o),{id:"constructionYear",type:"number",name:"constructionYear",placeholder:"e.g. 1990"}),t(i(n),{name:"constructionYear"})]),e("div",Ne,[we,t(i(o),{id:"description",as:"textarea",name:"description",placeholder:"Enter description",class:"input-description"}),t(i(n),{name:"description"})]),e("div",Re,[e("button",{type:"submit",class:T(["post-button",l.valid?"":"post-button-disabled"])}," POST ",2)])]),_:1},8,["validation-schema"])])])]))}};export{Se as default};
